(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4194:function(e,t,s){Promise.resolve().then(s.bind(s,8482))},8482:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(7437),l=s(7282);function r(){let{user:e}=(0,l.useAuth)();return(0,a.jsxs)("div",{className:"flex items-center justify-between h-14 bg-teal-700",children:[(0,a.jsx)("span",{className:"ml-5"}),(0,a.jsx)("h1",{className:"headerHomeLog flex text-2xl text-white font-Anta tracking-widest shadow-xl",children:"SISTCOM"}),(0,a.jsx)("p",{className:"mr-3 text-xs text-white",children:e.email})]})}s(3385);var n=s(5328),c=s(7907);function i(e){let{logout:t}=(0,l.useAuth)();(0,c.useRouter)();let s=e.setCurrentPage,r=e=>{s(e.target.id)},i=()=>{t()};return(0,a.jsx)("div",{className:"relative h-screen hidden md:block md:w-3/12  text-black border-r-2 ",children:(0,a.jsxs)("ul",{className:"",children:[(0,a.jsxs)("li",{id:"inicio",onClick:r,className:"bg-gray-100 border-b-2 px-5 py-4 flex justify-between hover:bg-gray-200 cursor-pointer items-center",children:["Inicio",(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(n.p6n,{})})]}),(0,a.jsxs)("li",{id:"agregarmm",onClick:r,className:"border-b-2 px-5 py-4 flex justify-between hover:bg-gray-200 cursor-pointer  items-center",children:["Agregar MM",(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(n.p6n,{})})]}),(0,a.jsxs)("li",{id:"finalizados",onClick:r,className:"border-b-2 px-5 py-4 flex justify-between hover:bg-gray-200 cursor-pointer  items-center",children:["Finalizados"," ",(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(n.p6n,{})})]}),(0,a.jsxs)("li",{id:"clientes",onClick:r,className:"border-b-2 px-5 py-4 flex justify-between hover:bg-gray-200 cursor-pointer  items-center",children:["Clientes",(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(n.p6n,{})})]}),(0,a.jsxs)("li",{onClick:()=>i(),className:"w-full border-b-2 px-5 py-4 flex justify-between hover:bg-gray-200 cursor-pointer  items-center",children:["Cerrar Sesi\xf3n"," ",(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(n.p6n,{})})]})]})})}var d=s(2265);function o(e){let t=0===e.getDay()?6:e.getDay()-1,s=[1,7,6,5,4,3,2][e.getDay()],a=e.setDate(e.getDate()-t);a=x(a);let l=e.setDate(e.getDate()+s+t);return{inicio:a,final:l=x(l)}}let x=e=>new Date((e=new Date(e)).getFullYear(),e.getMonth(),e.getDate(),0,0);var h=s(1016),u=s(8121);async function m(e,t,s,a){let l;let r=(0,u.ad)(h.Z),{inicio:n,final:c}=o(new Date);"current"===a&&(l="all"===s?(0,u.IO)((0,u.hJ)(r,"miniMasses"),(0,u.ar)("fechaCreado",">=",n),(0,u.ar)("assistClient","==",t),(0,u.Xo)("fechaCreado")):(0,u.IO)((0,u.hJ)(r,"miniMasses"),(0,u.ar)("assistClient","==",t),(0,u.ar)("fechaCreado",">=",n),(0,u.ar)("clientes","array-contains",s),(0,u.Xo)("fechaCreado"))),"open"===a&&(l="all"===s?(0,u.IO)((0,u.hJ)(r,"miniMasses"),(0,u.ar)("assistClient","==",t),(0,u.ar)("estado","==",!0),(0,u.Xo)("fechaProg")):(0,u.IO)((0,u.hJ)(r,"miniMasses"),(0,u.ar)("assistClient","==",t),(0,u.ar)("estado","==",!0),(0,u.ar)("clientes","array-contains",s),(0,u.Xo)("fechaProg"))),"closed"===a&&(l=(0,u.IO)((0,u.hJ)(r,"miniMasses"),(0,u.ar)("assistClient","==",t),(0,u.ar)("estado","==",!1),(0,u.Xo)("fechaCreado")));try{let t=await (0,u.PL)(l),s=[];t.forEach(e=>{s.push({id:e.id,nombreMM:e.data().nombreMM,fechaCreado:e.data().fechaCreado,fechaProg:e.data().fechaProg,clientes:e.data().clientes,estado:e.data().estado,fechaCerrado:e.data().fechaCerrado})}),e(s)}catch(e){console.log(e)}}var g=s(1709);function j(e){let{setModalSetDateProg:t,mmForEdit:s}=e,l=(0,u.ad)(h.Z),[r,n]=(0,d.useState)("00"),[c,i]=(0,d.useState)("00"),o=new Date,x=9>=o.getMonth()?"0"+(o.getMonth()+1):o.getMonth()+1,m=9>=o.getDate()?"0"+o.getDate():o.getDate(),j=o.getFullYear(),[f,b]=(0,d.useState)("".concat(j,"-").concat(x,"-").concat(m)),p=async()=>{let e=new Date(f).getFullYear(),a=new Date(f).getMonth(),n=new Date(f).getDate()+1;await (0,u.r7)((0,u.JU)(l,"miniMasses",s.id),{fechaProg:new Date(e,a,n,r,c)}),t(!1)};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full flex justify-center items-center",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-screen w-full bg-gray-100 opacity-80 z-10"}),(0,a.jsxs)("div",{className:"p-16 rounded-sm flex flex-col  items-center mt-40 bg-white z-20",children:[(0,a.jsx)("h3",{className:"text-center my-4 text-xl",children:"Establecer fecha de programacion"}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(g.nVo,{})}),(0,a.jsx)("span",{children:s.nameMM}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{onChange:e=>b(e.target.value),type:"date",value:f,className:"text-center my-6 ring-2 rounded-sm"}),(0,a.jsx)("span",{children:"HH:"}),(0,a.jsx)("input",{type:"text",onChange:e=>{e.target.value.length>2||parseInt(e.target.value)>23||n(e.target.value.replace(/[^0-9]/g,""))},value:r,className:"ring-2 rounded-sm h-7 w-8 text-center"}),(0,a.jsx)("span",{children:"MM:"}),(0,a.jsx)("input",{type:"text",onChange:e=>{e.target.value.length>2||parseInt(e.target.value)>59||i(e.target.value.replace(/[^0-9]/g,""))},value:c,className:"ring-2 rounded-sm h-7 w-8 text-center"})]}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>t(!1),className:"px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500 ",children:[" ","Cerrar"]}),(0,a.jsx)("button",{onClick:p,className:"px-3 py-2 bg-blue-500 text-white rounded-sm hover:bg-blue-300 ",children:"Guardar"})]})]})]})}var f=s(784);function b(e){let{setModalEditDateProg:t,mmForEdit:s}=e,l=(0,u.ad)(h.Z),r=new Date(s.fechaProg.toDate()),n=9>=r.getMonth()?"0"+(r.getMonth()+1):r.getMonth()+1,c=9>=r.getDate()?"0"+r.getDate():r.getDate(),i=9>=r.getHours()?"0"+r.getHours():r.getHours(),o=9>=r.getMinutes()?"0"+r.getMinutes():r.getMinutes(),x=r.getFullYear(),[m,j]=(0,d.useState)("".concat(x,"-").concat(n,"-").concat(c)),[f,b]=(0,d.useState)(i),[p,v]=(0,d.useState)(o),N=async()=>{let e=new Date(m).getFullYear(),a=new Date(m).getMonth(),r=new Date(m).getDate()+1;console.log(e),await (0,u.r7)((0,u.JU)(l,"miniMasses",s.id),{fechaProg:new Date(e,a,r,f,p)}),t(!1)};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full flex justify-center items-center",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-screen w-full bg-gray-100 opacity-80 z-10"}),(0,a.jsxs)("div",{className:"p-16 rounded-sm flex flex-col  items-center mt-40 bg-white z-20",children:[(0,a.jsx)("h3",{className:"text-center my-4 text-xl",children:"Editar fecha de programacion"}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(g.nVo,{})}),(0,a.jsx)("span",{children:s.nameMM}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{onChange:e=>j(e.target.value),type:"date",value:m,className:"text-center my-6 ring-2 rounded-sm"}),(0,a.jsx)("span",{children:"HH:"}),(0,a.jsx)("input",{type:"text",onChange:e=>{e.target.value.length>2||parseInt(e.target.value)>23||b(e.target.value.replace(/[^0-9]/g,""))},value:f,className:"ring-2 rounded-sm h-7 w-8 text-center"}),(0,a.jsx)("span",{children:"MM:"}),(0,a.jsx)("input",{type:"text",onChange:e=>{e.target.value.length>2||parseInt(e.target.value)>59||v(e.target.value.replace(/[^0-9]/g,""))},value:p,className:"ring-2 rounded-sm h-7 w-8 text-center"})]}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>t(!1),className:"px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500 ",children:[" ","Cerrar"]}),(0,a.jsx)("button",{onClick:N,className:"px-3 py-2 bg-blue-500 text-white rounded-sm hover:bg-blue-300 ",children:"Editar"})]})]})]})}function p(e){let{clientForList:t,userId:s}=e,[l,r]=(0,d.useState)([]),[n,c]=(0,d.useState)(!1),[i,x]=(0,d.useState)(!1),[g,p]=(0,d.useState)(null),[v,N]=(0,d.useState)([]),[w,y]=(0,d.useState)([]),[C,D]=(0,d.useState)(!1),M=(0,u.ad)(h.Z),S=(e,t)=>{p({id:e,nameMM:t}),c(!0)};(0,d.useEffect)(()=>{m(r,s,t,"open")},[t,n,i,C,s]),(0,d.useEffect)(()=>{let{inicio:e}=o(new Date),t=[],s=[];l.forEach(a=>{a.fechaCreado.toDate()<e?s.push(a):t.push(a)}),y(s),N(t)},[l]);let P=e=>{(0,u.r7)((0,u.JU)(M,"miniMasses",e),{fechaCerrado:new Date,estado:!1}),D(!C)},k=(e,t,s)=>{p({id:e,nombreMM:t,fechaProg:s}),x(!0)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"py-4 border-b-2 w-full md:px-10",children:(0,a.jsxs)("table",{className:"table-auto w-full text-center ",children:[(0,a.jsxs)("thead",{className:"",children:[(0,a.jsxs)("tr",{className:"bg-teal-600 text-white text-md h-9",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{colSpan:5,children:"Semana Actual"})]}),(0,a.jsxs)("tr",{className:"h-10",children:[(0,a.jsx)("th",{children:"N\xb0"}),(0,a.jsx)("th",{children:"Nombre "}),(0,a.jsx)("th",{children:"Fecha Prog."}),(0,a.jsx)("th",{children:"Clientes "}),(0,a.jsx)("th",{children:"Estado"})]})]}),(0,a.jsx)("tbody",{children:v.map((e,s)=>{var l,r,n,c,i,d,o;let x=(null===(l=e.fechaProg)||void 0===l?void 0:l.toDate().getDate())<=new Date().getDate()?"bg-red-100":(null===(r=e.fechaProg)||void 0===r?void 0:r.toDate().getDate())-1===new Date().getDate()?"bg-orange-100":"",h=null===(n=e.fechaProg)||void 0===n?void 0:n.toDate().getDate(),u=(null===(c=e.fechaProg)||void 0===c?void 0:c.toDate().getMonth())+1,m=(null===(i=e.fechaProg)||void 0===i?void 0:i.toDate().getYear())-100,g=null===(d=e.fechaProg)||void 0===d?void 0:d.toDate().getHours(),j=null===(o=e.fechaProg)||void 0===o?void 0:o.toDate().getMinutes();return(0,a.jsxs)("tr",{className:"h-8 ".concat(x),children:[(0,a.jsx)("td",{children:s+1}),(0,a.jsx)("td",{children:e.nombreMM}),(0,a.jsx)("td",{children:e.fechaProg?(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsxs)("span",{children:[h,"/",u,"/",m," - ",g,":",j]})," ",(0,a.jsx)("button",{onClick:()=>k(e.id,e.nombreMM,e.fechaProg),className:"cliente1 hover:text-blue-500 w-fit text-xl cursor-pointer",children:(0,a.jsx)(f.mM_,{})})]}):(0,a.jsx)("button",{onClick:()=>S(e.id,e.nombreMM),className:"rounded-sm bg-blue-300 px-2 py-1 text-sm hover:bg-blue-500 hover:text-white",children:"Fecha"})}),(0,a.jsx)("td",{children:"all"===t?e.clientes.map((t,s)=>s===e.clientes.length-1?t:t+" - "):t}),(0,a.jsx)("td",{children:e.fechaProg?(0,a.jsx)("button",{onClick:()=>{P(e.id)},className:"rounded-sm bg-red-300 px-2 py-1 text-sm hover:bg-red-500 hover:text-white",children:"Cerrar"}):"- - -"})]},"tr".concat(e.id))})})]})}),(0,a.jsx)("div",{className:"py-4 border-b-2 w-full md:px-10",children:(0,a.jsxs)("table",{className:"table-auto w-full text-center ",children:[(0,a.jsxs)("thead",{className:"",children:[(0,a.jsxs)("tr",{className:"bg-teal-600 text-white text-md h-9",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{colSpan:5,children:"Minimass Anteriores"})]}),(0,a.jsxs)("tr",{className:"h-10",children:[(0,a.jsx)("th",{children:"N\xb0"}),(0,a.jsx)("th",{children:"Nombre "}),(0,a.jsx)("th",{children:"Fecha Prog."}),(0,a.jsx)("th",{children:"Clientes "}),(0,a.jsx)("th",{children:"Estado"})]})]}),(0,a.jsx)("tbody",{children:w.map((e,s)=>{var l,r;let n=(null===(l=e.fechaProg)||void 0===l?void 0:l.toDate().getDate())<=new Date().getDate()?"bg-red-100":(null===(r=e.fechaProg)||void 0===r?void 0:r.toDate().getDate())-1===new Date().getDate()?"bg-orange-100":"",c=e.fechaProg.toDate().getDate(),i=e.fechaProg.toDate().getMonth()+1,d=e.fechaProg.toDate().getYear()-100,o=e.fechaProg.toDate().getHours(),x=e.fechaProg.toDate().getMinutes();return(0,a.jsxs)("tr",{className:"h-8 ".concat(n),children:[(0,a.jsx)("td",{children:s+1}),(0,a.jsx)("td",{children:e.nombreMM}),(0,a.jsx)("td",{children:e.fechaProg?(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsxs)("span",{children:[c,"/",i,"/",d," - ",o,":",x]})," ",(0,a.jsx)("button",{onClick:()=>k(e.id,e.nombreMM,e.fechaProg),className:"cliente1 hover:text-blue-500 w-fit text-xl cursor-pointer",children:(0,a.jsx)(f.mM_,{})})]}):(0,a.jsx)("button",{onClick:()=>S(e.id,e.nombreMM),className:"rounded-sm bg-blue-300 px-2 py-1 text-sm hover:bg-blue-500 hover:text-white",children:"Fecha"})}),(0,a.jsx)("td",{children:"all"===t?e.clientes.map((t,s)=>s===e.clientes.length-1?t:t+" - "):t}),(0,a.jsx)("td",{children:e.fechaProg?(0,a.jsx)("button",{onClick:()=>{P(e.id)},className:"rounded-sm bg-red-300 px-2 py-1 text-sm hover:bg-red-500 hover:text-white",children:"Cerrar"}):"- - -"})]},"tr".concat(e.id))})})]})}),n&&(0,a.jsx)(j,{setModalSetDateProg:c,mmForEdit:g}),i&&(0,a.jsx)(b,{setModalEditDateProg:x,mmForEdit:g})]})}async function v(e,t){let s=(0,u.ad)(h.Z),a=(0,u.IO)((0,u.hJ)(s,"clientes"),(0,u.ar)("assistClient","==",e)),l=await (0,u.PL)(a),r=[];l.forEach(e=>{r.push({id:e.id,client:e.data().client})}),t(r)}function N(){let[e,t]=(0,d.useState)([]),[s,r]=(0,d.useState)("all"),{user:n}=(0,l.useAuth)(),c=n.uid;return(0,d.useEffect)(()=>{v(c,t)},[c]),(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsx)("h2",{className:"w-fit mt-5 mb-2 ml-10 text-xl",children:"Clientes"}),(0,a.jsx)("div",{className:"max-w-sm w-52 ml-10",children:(0,a.jsxs)("select",{onChange:e=>r(e.target.value),id:"countries",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 ",children:[(0,a.jsx)("option",{value:"all",children:"Todos"},"select"),e.map((e,t)=>(0,a.jsx)("option",{value:e.client,children:e.client},"select".concat(t)))]})}),(0,a.jsx)(p,{clientForList:s,userId:c})]})}function w(e){let{setModalDeleteMM:t,userForEdit:s}=e,l=(0,u.ad)(h.Z),r=async e=>{await (0,u.oe)((0,u.JU)(l,"miniMasses",e)),t(!1)};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full flex justify-center items-center",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-screen w-full bg-gray-100 opacity-80 z-10"}),(0,a.jsxs)("div",{className:"p-16 rounded-sm flex flex-col  items-center mt-40 bg-white z-20",children:[(0,a.jsx)("h3",{className:"text-center mt-4 text-xl",children:"\xbfEst\xe1s seguro que deseas eliminar este Minimass?"}),(0,a.jsx)("p",{className:"mb-4",children:"(no quedar\xe1 registro)"}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(g.btG,{})}),(0,a.jsx)("p",{className:"text-center mt-2 mb-1 text-red-500 text-1xl",children:s.nombreMM}),(0,a.jsxs)("p",{className:"text-center mb-3 text-1xl",children:["Clientes:"," ",s.clientes.map((e,t)=>t===s.clientes.length-1?e:e+" - ")]}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>t(!1),className:"px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500 ",children:[" ","Cerrar"]}),(0,a.jsx)("button",{onClick:()=>r(s.id),className:"px-3 py-2 bg-red-500 text-white rounded-sm hover:bg-red-300 ",children:"Eliminar"})]})]})]})}function y(e){let{addedMM:t}=e,[s,r]=(0,d.useState)("all"),[n,c]=(0,d.useState)([]),[i,o]=(0,d.useState)([]),[x,h]=(0,d.useState)(!1),[u,g]=(0,d.useState)(null),{user:j}=(0,l.useAuth)(),f=j.uid,b=(e,t,s)=>{g({id:e,clientes:t,nombreMM:s}),h(!0)};return(0,d.useEffect)(()=>{m(c,f,s,"current")},[s,x,t,f]),(0,d.useEffect)(()=>{v(f,o)},[f]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"w-full text-center mt-4 text-xl",children:"Semana Actual"}),(0,a.jsx)("div",{className:"max-w-sm w-52 ml-10",children:(0,a.jsxs)("select",{onChange:e=>r(e.target.value),id:"countries",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 ",children:[(0,a.jsx)("option",{value:"all",children:"Todos"},"select"),i.map((e,t)=>(0,a.jsx)("option",{value:e.client,children:e.client},"select".concat(t)))]})}),(0,a.jsx)("div",{className:"py-4 border-b-2 w-full md:px-10",children:(0,a.jsxs)("table",{className:"table-auto w-full text-center ",children:[(0,a.jsxs)("thead",{className:"",children:[(0,a.jsxs)("tr",{className:"bg-teal-600 text-white text-md h-9",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{colSpan:5,children:"Semana 19 FEB"})]}),(0,a.jsxs)("tr",{className:"h-10",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{children:"N\xb0"}),(0,a.jsx)("th",{children:"Nombre "}),(0,a.jsx)("th",{children:"Fecha Prog."}),(0,a.jsx)("th",{children:"Clientes "}),(0,a.jsx)("th",{children:"Estado"})]})]}),(0,a.jsx)("tbody",{children:n.map((e,t)=>{var l,r;let n=(null===(l=e.fechaProg)||void 0===l?void 0:l.toDate().getDate())===new Date().getDate()?"bg-red-100":(null===(r=e.fechaProg)||void 0===r?void 0:r.toDate().getDate())-1===new Date().getDate()?"bg-orange-100":"";return(0,a.jsxs)("tr",{className:"h-8 ".concat(n),children:[(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>b(e.id,e.clientes,e.nombreMM),className:"hover:text-red-500",children:"x"})}),(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:e.nombreMM}),(0,a.jsx)("td",{className:"text-sm",children:e.fechaProg?(()=>{let t=e.fechaProg.toDate().getDate(),s=e.fechaProg.toDate().getMonth()+1,a=e.fechaProg.toDate().getYear()-100,l=e.fechaProg.toDate().getHours(),r=e.fechaProg.toDate().getMinutes();return"".concat(t,"/").concat(s,"/").concat(a," ").concat(l,":").concat(r)})():"- - -"}),(0,a.jsx)("td",{children:"all"===s?e.clientes.map((t,s)=>s===e.clientes.length-1?t:t+" - "):s}),(0,a.jsx)("td",{children:e.estado?"Abierto":(0,a.jsx)("span",{className:"text-red-500",children:"Cerrado"})})]},"tr".concat(e.id))})})]})}),x&&(0,a.jsx)(w,{setModalDeleteMM:h,userForEdit:u})]})}function C(){let[e,t]=(0,d.useState)(!0),[s,r]=(0,d.useState)(""),[n,c]=(0,d.useState)([]),[i,o]=(0,d.useState)([]),{user:x}=(0,l.useAuth)(),m=x.uid,g=(0,u.ad)(h.Z);(0,d.useEffect)(()=>{v(m,c)},[m]);let j=async a=>{a.preventDefault();let l=new Date;await (0,u.ET)((0,u.hJ)(g,"miniMasses"),{assistClient:m,clientes:i,estado:!0,fechaCreado:l,fechaProg:null,nombreMM:s}),r(""),t(!e)},f=e=>{let t=e.target.value;e.target.checked&&!i.includes(e.target.value)&&(i.push(t),o(i)),e.target.checked||o(i.filter(e=>e!=t))};return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:"pb-7 border-b-2 w-full md:px-10",children:[(0,a.jsx)("h2",{className:"w-full text-center my-4 text-xl",children:"Agregar MM"}),(0,a.jsxs)("form",{onSubmit:j,action:"#",className:"w-full flex justify-between items-center",children:[(0,a.jsx)("label",{htmlFor:"nombre",children:"Nombre"}),(0,a.jsx)("input",{required:!0,onChange:e=>r(e.target.value),value:s,type:"text",className:"ring-2 rounded-sm ml-2 w-96"}),(0,a.jsx)("div",{className:"ml-4",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center ",children:[(0,a.jsx)("input",{onChange:f,id:e.id,value:e.client,type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500cursor-pointer"}),(0,a.jsx)("label",{htmlFor:e.id,className:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:e.client})]},t))}),(0,a.jsx)("button",{className:"ml-10 px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500",children:"Guardar"})]})]}),(0,a.jsx)(y,{addedMM:e})]})}var D=s(6173);function M(e){let{setModalEditarCliente:t,userForEdit:s,userId:l}=e,[r,n]=(0,d.useState)(s.name),c=(0,u.ad)(h.Z),i=async()=>{await (0,u.pl)((0,u.JU)(c,"clientes",s.id),{client:r,assistClient:l}),t(!1)};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full flex justify-center items-center",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-screen w-full bg-gray-100 opacity-80 z-10"}),(0,a.jsxs)("div",{className:"p-16 rounded-sm flex flex-col  items-center mt-40 bg-white z-20",children:[(0,a.jsx)("h3",{className:"text-center my-4 text-xl",children:"Editar Cliente"}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(D.fzv,{})}),(0,a.jsx)("input",{onChange:e=>n(e.target.value),type:"text",value:r,className:"text-center my-6 ring-2 rounded-sm"}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>t(!1),className:"px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500 ",children:[" ","Cerrar"]}),(0,a.jsx)("button",{onClick:i,className:"px-3 py-2 bg-blue-500 text-white rounded-sm hover:bg-blue-300 ",children:"Editar"})]})]})]})}function S(e){let{setModalDeleteClient:t,userForEdit:s}=e,l=(0,u.ad)(h.Z),r=async e=>{await (0,u.oe)((0,u.JU)(l,"clientes",e)),t(!1)};return(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full flex justify-center items-center",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-screen w-full bg-gray-100 opacity-80 z-10"}),(0,a.jsxs)("div",{className:"p-16 rounded-sm flex flex-col  items-center mt-40 bg-white z-20",children:[(0,a.jsx)("h3",{className:"text-center my-4 text-xl",children:"\xbfEst\xe1s seguro que deseas eliminar este cliente?"}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(D.fzv,{})}),(0,a.jsx)("p",{className:"text-center mt-2 mb-4 text-red-500 text-3xl",children:s.name}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("button",{onClick:()=>t(!1),className:"px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500 ",children:[" ","Cerrar"]}),(0,a.jsx)("button",{onClick:()=>r(s.id),className:"px-3 py-2 bg-red-500 text-white rounded-sm hover:bg-red-300 ",children:"Eliminar"})]})]})]})}function P(){let{user:e}=(0,l.useAuth)(),t=e.uid,[s,r]=(0,d.useState)(!1),[n,c]=(0,d.useState)(!1),[i,o]=(0,d.useState)(null),[x,m]=(0,d.useState)(""),[g,j]=(0,d.useState)([]),b=(0,u.ad)(h.Z),p=(e,t)=>{o({id:e,name:t}),r(!0)},N=(e,t)=>{o({id:e,name:t}),c(!0)},w=async e=>{e.preventDefault();try{await (0,u.ET)((0,u.hJ)(b,"clientes"),{assistClient:t,client:x})}catch(e){console.log(e)}m(""),v(t,j)};return(0,d.useEffect)(()=>{v(t,j)},[n,s,t]),(0,a.jsxs)("div",{className:"flex flex-col w-full relative",children:[(0,a.jsxs)("div",{className:"pb-7 border-b-2 w-full h-fit md:px-10",children:[(0,a.jsx)("h2",{className:"w-full text-center my-4 text-xl",children:"Agregar Nuevo Cliente"}),(0,a.jsxs)("form",{onSubmit:w,action:"#",className:"w-full flex justify-center items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"px-2 py-1 mb-3 text-9xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(D.zy7,{})}),(0,a.jsx)("input",{required:!0,placeholder:"Cliente",onChange:e=>m(e.target.value),value:x,type:"text",className:"ring-2 rounded-sm w-70 ring-teal-600 mb-2 text-center py-1"}),(0,a.jsx)("label",{htmlFor:"nombre",children:"Nombre del Cliente"})]}),(0,a.jsx)("button",{className:"ml-10 px-3 py-2 bg-teal-600 text-white rounded-sm hover:bg-teal-500",children:"Agregar"})]})]}),(0,a.jsxs)("div",{className:"pb-7 border-b-2 w-full h-full md:px-10",children:[(0,a.jsx)("h2",{className:"w-full text-center my-4 text-xl",children:"Editar Clientes"}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center gap-10",children:g.map(e=>(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("button",{onClick:()=>p(e.id,e.client),className:"cliente1 hover:text-blue-500 w-fit text-xl",children:(0,a.jsx)(f.mM_,{})}),(0,a.jsx)("button",{onClick:()=>N(e.id,e.client),className:"hover:text-red-500 w-fit text-2xl",children:"x"})]}),(0,a.jsx)("span",{className:"px-2 py-1 mb-3 w-fit text-7xl text-teal-600 ring-2 ring-teal-600 rounded-md",children:(0,a.jsx)(D.fzv,{})}),(0,a.jsx)("p",{id:"cliente1",className:"rounded-sm text-center mb-2 w-24",children:e.client})]},e.id))})]}),s&&(0,a.jsx)(M,{setModalEditarCliente:r,userForEdit:i,userId:t}),n&&(0,a.jsx)(S,{setModalDeleteClient:c,userForEdit:i})]})}function k(){let[e,t]=(0,d.useState)([]),[s,r]=(0,d.useState)([]),[n,c]=(0,d.useState)([]),[i,x]=(0,d.useState)(!1),{user:g}=(0,l.useAuth)(),j=g.uid,b=(0,u.ad)(h.Z);(0,d.useEffect)(()=>{m(t,j,"all","closed")},[i,j]),(0,d.useEffect)(()=>{let{inicio:t}=o(new Date),s=[],a=[];e.forEach(e=>{e.fechaCreado.toDate()<t?a.push(e):s.push(e)}),r(s),c(a)},[e]);let p=e=>{(0,u.r7)((0,u.JU)(b,"miniMasses",e),{fechaCerrado:new Date,estado:!0}),x(!i)};return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsx)("div",{className:"py-4 border-b-2 w-full md:px-10",children:(0,a.jsxs)("table",{className:"table-auto w-full text-center ",children:[(0,a.jsxs)("thead",{className:"",children:[(0,a.jsxs)("tr",{className:"bg-teal-600 text-white text-md h-9",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{colSpan:5,children:"Finalizados de la Semana Actual"})]}),(0,a.jsxs)("tr",{className:"h-10",children:[(0,a.jsx)("th",{children:"N\xb0"}),(0,a.jsx)("th",{children:"Nombre "}),(0,a.jsx)("th",{children:"Clientes "}),(0,a.jsx)("th",{children:"Cerrado"}),(0,a.jsx)("th",{children:"Reopen"})]})]}),(0,a.jsx)("tbody",{children:s.map((e,t)=>(0,a.jsxs)("tr",{className:"h-8",children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:e.nombreMM}),(0,a.jsx)("td",{children:e.clientes.map((t,s)=>s===e.clientes.length-1?t:t+" - ")}),(0,a.jsx)("td",{children:e.fechaCerrado?(()=>{let t=e.fechaCerrado.toDate().getDate(),s=e.fechaCerrado.toDate().getMonth()+1,a=e.fechaCerrado.toDate().getYear()-100,l=e.fechaCerrado.toDate().getHours(),r=e.fechaCerrado.toDate().getMinutes();return"".concat(t,"/").concat(s,"/").concat(a," ").concat(l,":").concat(r)})():"- - -"}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>{p(e.id)},className:"rounded-sm bg-blue-300 px-2 py-1hover:bg-blue-500 hover:text-white text-xl",children:(0,a.jsx)(f.iY8,{})})})]},"tr".concat(e.id)))})]})}),(0,a.jsx)("div",{className:"py-4 border-b-2 w-full md:px-10",children:(0,a.jsxs)("table",{className:"table-auto w-full text-center ",children:[(0,a.jsxs)("thead",{className:"",children:[(0,a.jsxs)("tr",{className:"bg-teal-600 text-white text-md h-9",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{colSpan:5,children:"Finalizados Anteriores"})]}),(0,a.jsxs)("tr",{className:"h-10",children:[(0,a.jsx)("th",{children:"N\xb0"}),(0,a.jsx)("th",{children:"Nombre "}),(0,a.jsx)("th",{children:"Clientes "}),(0,a.jsx)("th",{children:"cerrado"})]})]}),(0,a.jsx)("tbody",{children:n.map((e,t)=>{var s,l;let r=(null===(s=e.fechaProg)||void 0===s?void 0:s.toDate().getDate())<=new Date().getDate()?"bg-red-100":(null===(l=e.fechaProg)||void 0===l?void 0:l.toDate().getDate())-1===new Date().getDate()?"bg-orange-100":"";return(0,a.jsxs)("tr",{className:"h-8 ".concat(r),children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:e.nombreMM}),(0,a.jsx)("td",{children:e.clientes.map((t,s)=>s===e.clientes.length-1?t:t+" - ")}),(0,a.jsx)("td",{children:e.fechaCerrado?(()=>{let t=e.fechaCerrado.toDate().getDate(),s=e.fechaCerrado.toDate().getMonth()+1,a=e.fechaCerrado.toDate().getYear()-100,l=e.fechaCerrado.toDate().getHours(),r=e.fechaCerrado.toDate().getMinutes();return"".concat(t,"/").concat(s,"/").concat(a," ").concat(l,":").concat(r)})():"- - -"}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>{p(e.id)},className:"rounded-sm bg-blue-300 px-2 py-1 hover:bg-blue-500 hover:text-white text-xl",children:(0,a.jsx)(f.iY8,{})})})]},"tr".concat(e.id))})})]})})]})}function E(e){let{userEmail:t}=e,[s,l]=(0,d.useState)("inicio");return(0,a.jsxs)("div",{className:"font-Anta",children:[(0,a.jsx)(r,{}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(i,{setCurrentPage:l}),"agregarmm"===s?(0,a.jsx)(C,{}):"inicio"===s?(0,a.jsx)(N,{}):"clientes"===s?(0,a.jsx)(P,{userEmail:t}):"finalizados"!==s||(0,a.jsx)(k,{})]})]})}function A(){return(0,a.jsx)("div",{className:"flex items-center justify-center h-14 bg-teal-700",children:(0,a.jsx)("h1",{className:"flex text-2xl text-white font-Anta tracking-widest shadow-xl",children:"SISTCOM"})})}function F(){let{user:e}=l.useAuth,[t,s]=(0,d.useState)(""),[r,n]=(0,d.useState)(""),[c,i]=(0,d.useState)(!1),{loginFire:o}=(0,l.useAuth)(),x=async e=>{e.preventDefault();let s=await o(t,r);s&&s.operationType,s&&"auth/invalid-credential"===s.code&&i(!0)};return(0,a.jsxs)("div",{children:[(0,a.jsx)(A,{}),(0,a.jsx)("div",{className:"Body flex h-full w-full justify-center items-center font-Anta",children:(0,a.jsxs)("div",{className:"LogBox flex jsu items-center flex-col item-center w-11/12 md:w-6/12",children:[(0,a.jsx)("div",{className:"LogHeader w-full rounded-t-md flex items-center justify-center mt-28  h-10 bg-teal-700 text-white tracking-widest ",children:"Iniciar Sesi\xf3n"}),(0,a.jsx)("div",{className:"LogBody w-full border border-teal-700 rounded-b-md shadow-xl",children:(0,a.jsxs)("form",{onSubmit:x,className:"my-10 ml-3",children:[(0,a.jsxs)("div",{className:"flex flex-col my-6 ml-6 w-full",children:[(0,a.jsx)("label",{htmlFor:"email",children:"Email "}),(0,a.jsx)("input",{value:t,onChange:e=>s(e.target.value),type:"email",id:"email",placeholder:"example@email.com",className:"pl-5 ring-1 ring-teal-700 w-8/12 rounded-sm mt-1 hover:ring-teal-900 focus:ring-1 focus:ring-blue-950 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"flex flex-col my-6 ml-6 w-full",children:[(0,a.jsx)("label",{htmlFor:"pass",children:"Contrase\xf1a "}),(0,a.jsx)("input",{value:r,onChange:e=>n(e.target.value),type:"password",id:"pass",placeholder:"**************",className:"pl-5 ring-1 ring-teal-700 w-8/12 rounded-sm mt-1 hover:ring-teal-900 focus:ring-1 focus:ring-blue-950 focus:outline-none"})]}),c&&(0,a.jsx)("p",{className:"text-red-500 ml-6 mb-4",children:"Email y/o contrase\xf1a erroneas"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("button",{className:"p-3 rounded bg-teal-700 text-white hover:bg-teal-600",children:"Iniciar Sesi\xf3n"})})]})})]})})]})}function z(){let{user:e}=(0,l.useAuth)();return(0,a.jsx)(a.Fragment,{children:e?(0,a.jsx)(E,{}):(0,a.jsx)(F,{})})}},7282:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return d},authContext:function(){return c},useAuth:function(){return i}});var a=s(7437),l=s(1016),r=s(2265),n=s(2730);let c=(0,r.createContext)(),i=()=>{let e=(0,r.useContext)(c);return e||console.log("error creando auth context"),e};function d(e){let{children:t}=e,[s,i]=(0,r.useState)({error:null,user:null}),{error:d,user:o}=s,x=async(e,t)=>{let s=(0,n.v0)(l.Z);try{let a=await (0,n.e5)(s,e,t);return i(e=>({...e,user:a.user})),a}catch(e){return i(t=>({...t,error:e})),e}},h=async()=>{i(e=>({...e,user:null}));let e=(0,n.v0)(l.Z);await (0,n.w7)(e)};return(0,a.jsx)(c.Provider,{value:{loginFire:x,logout:h,error:d,user:o},children:t})}},1016:function(e,t,s){"use strict";let a=(0,s(6142).ZF)({apiKey:"AIzaSyBbQwYQcp0B_UNqrBzmvfSHose5Y4ArKcw",authDomain:"sistcom-d3a18.firebaseapp.com",projectId:"sistcom-d3a18",storageBucket:"sistcom-d3a18.appspot.com",messagingSenderId:"970290231904",appId:"1:970290231904:web:c5491e2f00481256b16105"});t.Z=a},3385:function(){}},function(e){e.O(0,[124,376,51,212,358,593,526,971,69,744],function(){return e(e.s=4194)}),_N_E=e.O()}]);